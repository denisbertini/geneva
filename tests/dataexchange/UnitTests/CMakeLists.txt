CMAKE_MINIMUM_REQUIRED(VERSION 2.6)

ADD_CUSTOM_TARGET ( "dataexchange-tests-unit" )

ADD_DEPENDENCIES ( "dataexchange-tests-unit"
	# Add all the available tests targets (EXECUTABLENAMEs) here
	GDataExchangeObjectsTests
)

SET ( EXECUTABLENAME GDataExchangeObjectsTests )

SET ( ${EXECUTABLENAME}_SRCS 
	ObjectsTests
)

ADD_SUBDIRECTORY ( ObjectsTestsHeaders )

FOREACH ( _header IN LISTS ${EXECUTABLENAME}_HEADERS )
	ADD_PCH_RULE ( ObjectsTestsHeaders/${_header} ${EXECUTABLENAME}_SRCS )
ENDFOREACH ( _header IN LISTS ${EXECUTABLENAME}_HEADERS )

ADD_EXECUTABLE ( ${EXECUTABLENAME}
	${${EXECUTABLENAME}_SRCS}
)

INCLUDE_DIRECTORIES ( AFTER
	${PROJECT_SOURCE_DIR}/include
	${PROJECT_SOURCE_DIR}/tests/dataexchange/UnitTests/ObjectsTestsHeaders
)

TARGET_LINK_LIBRARIES ( ${EXECUTABLENAME}
	${DATAEXCHANGE_LIBNAME} 
	${HAP_LIBNAME}
#	${COURTIER_LIBNAME}   
#	${GENEVA_LIBNAME}
	${COMMON_LIBNAME}
	${Boost_LIBRARIES}
)

INSTALL ( TARGETS ${EXECUTABLENAME} DESTINATION tests/dataexchange/UnitTests
	PERMISSIONS
	OWNER_READ OWNER_WRITE OWNER_EXECUTE
	GROUP_READ GROUP_EXECUTE
	WORLD_READ WORLD_EXECUTE
)
