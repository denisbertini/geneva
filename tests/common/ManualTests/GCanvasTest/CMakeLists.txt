CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

SET (EXECUTABLENAME GCanvasTest)

SET (${EXECUTABLENAME}_SRCS
	GCanvasTest
)


SET ( TESTPICTURES
	./pictures/ml.ppm
)

ADD_EXECUTABLE(${EXECUTABLENAME}
	${${EXECUTABLENAME}_SRCS}
)

# Copy the picture files to the build tree for easier testing
FOREACH ( file IN LISTS TESTPICTURES )
	CONFIGURE_FILE ( ${file} ${file} COPYONLY )
ENDFOREACH ()

TARGET_LINK_LIBRARIES (${EXECUTABLENAME}
	${COMMON_LIBNAME}
	${Boost_LIBRARIES}
)

ADD_TEST(${EXECUTABLENAME} ${CMAKE_CURRENT_BINARY_DIR}/${EXECUTABLENAME})

INSTALL ( TARGETS ${EXECUTABLENAME} DESTINATION tests/common/ManualTests/${EXECUTABLENAME}
	PERMISSIONS
	OWNER_READ OWNER_WRITE OWNER_EXECUTE
	GROUP_READ GROUP_EXECUTE
	WORLD_READ WORLD_EXECUTE
)

INSTALL ( FILES ${TESTPICTURES} DESTINATION tests/common/ManualTests/${EXECUTABLENAME}/pictures
	PERMISSIONS
	OWNER_READ OWNER_WRITE
	GROUP_READ
	WORLD_READ
)
